# Updating the SDK from OpenAPI

As of Phase 3, this SDK is **no longer generated by Speakeasy** on each change. The codebase is maintained manually. When the LambdaDB API changes (new endpoints, request/response shapes), update the SDK as follows.

## OpenAPI spec

- **Spec URL**: [lambdadb/docs reference/api/openapi.json](https://github.com/lambdadb/docs/blob/main/reference/api/openapi.json)
- **Resolved copy (reference only)**: `.speakeasy/out.openapi.yaml` (may be outdated; compare with the URL above). This copy has been updated for: default server `api.lambdadb.ai/projects/playground`, `CollectionResponse` timestamps (`createdAt`, `updatedAt`, `dataUpdatedAt`), and list collections pagination (`size`, `pageToken`, `nextPageToken`).

## How to update

1. **Option A – Manual code edits**  
   Edit the relevant files under `src/`:
   - **Models**: `src/models/`, `src/models/operations/` (request/response types, Zod schemas).
   - **API calls**: `src/funcs/` (path, query, body, and error handling).
   - **Config**: `src/lib/config.ts` if server URLs or metadata change.

2. **Option B – One-off Speakeasy run (optional)**  
   The `.speakeasy/` folder (e.g. `gen.yaml`, `workflow.yaml`) is kept for reference. If you have the Speakeasy CLI and want to regenerate once to get a diff:
   - Run Speakeasy generation **locally** into a separate branch or directory.
   - **Do not** re-enable the old `sdk_generation.yaml` CI workflow; treat the output as a reference and apply only the changes you need into `src/` (and keep `src/client.ts` and any hand-written layers unchanged).

3. **Public API**  
   The recommended entry point is `LambdaDBClient` and `client.collection(name)` in `src/client.ts`. Keep that API stable; map any new backend operations onto it as needed.

## CI

- **Publish**: `.github/workflows/publish.yaml` runs on push of a version tag (e.g. `v0.3.0`) or on `workflow_dispatch`. It runs `npm ci`, `npm run build`, and `npm publish`. No Speakeasy step is involved.
